<!-- Null -->
<div class="value-box" *ngIf="!valueType">
  <div class="value-box-type-name">-/-</div>
</div>

<ng-container *ngIf="valueType">
  <!-- Value type -->
  <div class="value-box value-box-native" *ngIf="valueType.isNative || valueType.isEnum">
    <!-- Native -->
    <ng-container *ngIf="valueType.isNative">
      <input [ngModel]="value" [type]="getNativeInputType()" />
    </ng-container>

    <!-- Enum -->
    <ng-container *ngIf="valueType.isEnum">
      <select [ngModel]="value">
        <option *ngFor="let option of valueType.values" [value]="option">{{ option }}</option>
      </select>
    </ng-container>
  </div>

  <!-- Object / List -->
  <div class="value-box" *ngIf="!valueType.isNative && !valueType.isEnum">
    <div class="value-box-type-name" (click)="collapsed = !collapsed">
      {{ valueType.expressionName ?? valueType.typeName }}
    </div>

    <ng-container *ngIf="!collapsed">

      <!-- List -->
      <ng-container *ngIf="valueType.isList">
        <app-type-list [types]="types" [value]="value"></app-type-list>
      </ng-container>

      <!-- Properties -->
      <ng-container *ngIf="valueType.properties">
        <ng-container *ngFor="let property of valueType.properties">
          <div class="value-box-property-name">
            {{ property.name }}:
            <span class="value-box-property-type">({{ property.typeName }})</span>
          </div>

          <!-- Array -->
          <ng-container *ngIf="property.isArray">
            <app-type-list [types]="types" [targetType]="getPropertyTargetType(property)"
                           [value]="getPropertyValue(property)"></app-type-list>
          </ng-container>

          <!-- Single value -->
          <ng-container *ngIf="!property.isArray">
            <div class="value-controls">
              <button>Set</button>
            </div>

            <app-type-object [types]="types" [targetType]="getPropertyTargetType(property)" [value]="getPropertyValue(property)" ></app-type-object>
          </ng-container>


        </ng-container>
      </ng-container>
    </ng-container>
  </div>
</ng-container>
